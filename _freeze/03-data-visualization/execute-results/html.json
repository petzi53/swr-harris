{
  "hash": "126c1369607ce3380f4127c7b25e2812",
  "result": {
    "engine": "knitr",
    "markdown": "# Data visualization {#sec-chap03}\n\n\n\n\n\n## Achievements to unlock\n\n::: my-objectives\n::: my-objectives-header\nObjectives\n:::\n\n::: my-objectives-container\n**SwR Achievements**\n\n- **Achievement 1**: Choosing and creating graphs for a single categorical variable\n- **Achievement 2**: Choosing and creating graphs for a single continuous variable \n- **Achievement 3**: Choosing and creating graphs for two variables at once \n- **Achievement 4**: Ensuring graphs are well-formatted with appropriate and clear titles, labels, colors, and other features\n\n:::\n:::\n\n## Gun violence in the US\n\n\n1. Research about gun violence in under developed. Harris refers to an article by Stark & Shah [-@stark2017] (Figure 1 and 2).\n2. Data for figure 3 (Homicides in the US by guns 2012-2016) comes from the [Uniform Crime Reporting (UCR)](fbi.gov/services/cjis/ucr):\n\n    > The Uniform Crime Reporting (UCR) Program generates reliable statistics for use in law enforcement. It also provides information for students of criminal justice, researchers, the media, and the public. The program has been providing crime statistics since 1930.\n    \n    > The UCR Program includes data from more than 18,000 city, university and college, county, state, tribal, and federal law enforcement agencies. Agencies participate voluntarily and submit their crime data either through a state UCR program or directly to the FBI's UCR Program.\n\n3. Figure 4: Handguns were the most widely used type of gun for homicide in 2016.\n4. Gun manufacturers play an essential role: Figure 5 and 6.\n\n## Data, codebook, and R packages\n\n::: my-resource\n::: my-resource-header\nData, codebook, and R packages for data visualization\n:::\n\n::: my-resource-container\n\n**Data**\n\nThere are two options:\n\n1. Download the three data files from <https://edge.sagepub.com/harris1e>\n    -  nhanes_2011_2012_ch3.csv\n    -  fbi_deaths_2016_ch3.csv \n    -  gun_publications_funds_2004_2015_ch3.csv\n2.  Download \n    -  the raw data directly from the Internet for the FBI deaths data \n    -  the <a class='glossary' title='The National Health and Nutrition Examination Survey (NHANES) is a program of studies designed to assess the health and nutritional status of adults and children in the United States. The survey is unique in that it combines interviews and physical examinations. (NHANES)'>NHANES</a> data by following the instructions in Box 3.1\n    -  the gun_publications_funds_2004_2015_ch3.csv \n    from <https://edge.sagepub.com/harris1e>\n\nI will only work with the second option.\n\n**Codebook**\n\nAgain there are two options:\n\n1. Download from <https://edge.sagepub.com/harris1e> \n    - nhanes_demographics_2012_codebook.html \n    - nhanes_auditory_2012_codebook.html \n2. Access the codebooks online on the National Health and Nutrition Examination Survey [(NHANES) website](https://wwwn.cdc.gov/nchs/nhanes/Search/DataPage.aspx?Component=Questionnaire&CycleBeginYear=2011)\n\n        \nI will only work with the second option.\n\n**Packages**\n\n1. Packages used with the book (sorted alphabetically)\n\n- {**data.table**}: @pak-data-table (Tyson Barrett)\n- {**ggmosaic**}: @pak-ggmosaic (Haley Jeppson)\n- {**ggrepel**}: @pak-ggrepel (Kamil Slowikowski)\n- {**gridExtra**}: @pak-gridExtra (Baptiste Auguie)\n- ~~{**httr2**}: @pak-httr2 (Hadley Wickham)~~\n- {**readxl**}: @pak-readxl (Jennifer Bryan)\n- {**RNHANES**}: @pak-RNHANES (Herb Susmann)\n- {**scales**}: @pak-scales (Hadley Wickham)\n- {**tidyverse**}: @pak-tidyverse (Hadley Wickham)\n- {**waffle**}: @pak-waffle (Bob Rudis)\n\n:::::{.my-watch-out}\n:::{.my-watch-out-header}\nWATCH OUT! Instead of downloading the file with {**httr**} I will use `utils::download.file()`\n:::\n::::{.my-watch-out-container}\nHarris lists the older {**httr**} package, but now there is {**httr2**}, \"a modern re-imagining of {**httr**} that uses a pipe-based interface and solves more of the problems that <a class='glossary' title='An API, or application programming interface, is a set of defined rules that enable different applications to communicate with each other. It acts as an intermediary layer that processes data transfers between systems, letting companies open their application data and functionality to external third-party developers, business partners, and internal departments within their companies. (IBM)'>API</a> wrapping packages face.\" (See @pak-httr2)\n\nIn the book is the {**httr**} package just used for downloading the excel file from the FBI website. For this specific task there is no need to download, install and learn a new package. You can use `utils::download.file()`, a function as I have it already applied successfully in @lst-chap02-get-brfss-2014-data.\n::::\n:::::\n\n\n2. My additional packages (sorted alphabetically)\n\n\n\n:::\n:::\n\n\n## Graphs for a single categorical variable\n\n### Introduction\n\nThere are several options for visualizing a singe categorical variable:\n\n- **Pie charts**: Show parts of a whole. **Not recommended**: \n    - Humans aren’t particularly good at estimating quantity from angles: Once we have more than two categories, pie charts can easily misrepresent percentages and become hard to read.\n    - Pie charts do badly when there are lots of categories. \n        - Matching the labels and the slices can be hard work. \n        - Small percentages (which might be important) are tricky to show. \n    - (See more details and very convincing examples [Why you shouldn’t use pie charts](https://scc.ms.unimelb.edu.au/resources/data-visualisation-and-exploration/no_pie-charts) and [Here’s why you should (almost) never use a pie chart for your data](https://theconversation.com/heres-why-you-should-almost-never-use-a-pie-chart-for-your-data-214576) [@barnett2024; @hunt2019]. But see also the more differenced view in [what is a pie chart?](https://www.storytellingwithdata.com/blog/2020/5/14/what-is-a-pie-chart) [@ricks2020]).\n- **Waffle charts**: Show parts of whole. Waffle charts are one of the alternatives for replacing pie charts, but are seldom used.\n- **Bar charts**: Comparing groups. \n- **Point charts**: Comparing groups.\n\n### Get the data\n\nThe data can be download from the internet with the following URL: <https://ucr.fbi.gov/crime-in-the-u.s/2016/crime-in-the-u.s.-2016/tables/expanded-homicide-data-table-4.xls/output.xls>\n\nTo get the data for this chapter is a three step procedure:\n\n:::::{.my-procedure}\n:::{.my-procedure-header}\n:::::: {#prp-chap03-get-internet-data}\n: How to get data from the internet\n::::::\n:::\n::::{.my-procedure-container}\n\n1. My first step is always to go to the website and download the file manually. Some people may believe that this is superfluous, but I think there are three advantages for this preparatory task:\n    - Inspecting the website and checking if the URL is valid and points to the correct dataset.\n    - Checking the file extension\n    - Inspecting the file after downloaded to see if there is something to care about (e.g., the file starts with several lines, that are not data, or other issues).\n2. Download the file using `utils::donwload.file()`.\n3. Read the imported file into R with the appropriate program function, in the first case `readxl::read_excel()`\n   \n\n::::\n:::::\n\n\n:::::{.my-example}\n:::{.my-example-header}\n:::::: {#exm-chap03-get-data}\n: Get data for chapter 3\n::::::\n:::\n::::{.my-example-container}\n\n::: {.panel-tabset}\n\n###### FBI\n\n:::::{.my-r-code}\n:::{.my-r-code-header}\n:::::: {#cnj-chap03-get-fbi-data}\n: Get data from the FBI’s Uniform Crime Reporting database\n::::::\n:::\n::::{.my-r-code-container}\n\n::: {.cell}\n\n```{#lst-chap03-get-fbi-data .r .cell-code  lst-cap=\"Get data from the FBI’s Uniform Crime Reporting database\"}\n## run only once (manually)\n# create a variable that contains the web\n# URL for the data set\nurl1 <- base::paste0(\"https://ucr.fbi.gov/crime-in-the-u.s\",\n                     \"/2016/crime-in-the-u.s.-2016/tables/\",\n                     \"expanded-homicide-data-table-4.xls/output.xls\")\n\n## run only once (manually)\n## download only once (manually)\nutils::download.file(url = url1,\n                     tf <- base::tempfile(),\n                     mode = \"wb\"\n)\n\nfbi_deaths <- tibble::tibble(\n     readxl::read_excel(path = tf,\n                        sheet = 1,\n                        skip = 3,\n                        n_max = 18))\n\ndata_folder <- base::paste0(here::here(), \"/data/\")\nif (!base::file.exists(data_folder)) \n    {base::dir.create(data_folder)}\n\nchap03_folder <- base::paste0(here::here(), \"/data/chap03/\")\nif (!base::file.exists(chap03_folder)) \n    {base::dir.create(chap03_folder)}\n\nbase::saveRDS(object = fbi_deaths, \n        file = paste0(chap03_folder, \"/fbi_death.rds\"))\n```\n:::\n\n\n***\n\nIn changed the recommended R code by Harris for downloading the FBI Excel Data I in several ways:\n\n1. I did not use command from {**httr**}, but `utils::download.file()`.\n2. Instead creating a data frame with `base::data.frame()` I used a `tibble::tibble()`. This has the advantage that the column names were not changed. In the original files the column names are years, but in base R is not allowed that column names start with a number. In tidyverse this is possible but you must refer to this column names with enclosed accents like `2016`.\n3. Instead of saving the data as an Excel file I think that it is more convenient to store it as an R object with the extension \".rds\". (I believe that Harris saved it in the book only to get the same starting condition with the already downloaded file in the books companion web site.) \n::::\n:::::\n\n\n\n###### NHANES 1\n\n:::::{.my-r-code}\n:::{.my-r-code-header}\n:::::: {#cnj-chap03-get-NHANES1-data}\n: Get NHANES data 2011-2012 from the CDC website with {RNHANES}\n::::::\n:::\n::::{.my-r-code-container}\n\n\n::: {.cell}\n\n```{#lst-chap03-get-NHANES1-data .r .cell-code  lst-cap=\"Get NHANES data (2011-2012) from the CDC website with {RNHANES}\"}\n## run only once (manually)\n# download audiology data (AUQ_G)\n# with demographics\nnhanes_2012 <- \n    RNHANES::nhanes_load_data(\n        file_name = \"AUQ_G\", \n        year = \"2011-2012\",\n        demographics = TRUE)\n\ndata_folder <- base::paste0(here::here(), \"/data/\")\nif (!base::file.exists(data_folder)) \n    {base::dir.create(data_folder)}\n\nchap03_folder <- base::paste0(here::here(), \"/data/chap03/\")\nif (!base::file.exists(chap03_folder)) \n    {base::dir.create(chap03_folder)}\n\nbase::saveRDS(object = nhanes_2012, \n        file = paste0(chap03_folder, \"/nhanes_2012.rds\"))\n```\n:::\n\n\n\n::::\n:::::\n\n\n{RNHANES} combines as a package specialized to download data from the National Health and Nutrition Examination Survey (NHANES) step 2 and 3 of @prp-chap03-get-internet-data. But as it turned out it only doesn't work with newer audiology data than 2012. I tried to use the package with data from 2016 and 2018 (For 2014 there are no audiology data available), but I got an error message.\n\n> Error in validate_year(year) : Invalid year: 2017-2018\n\nThe problem lies in the function `RNHANES:::validate_year()`. It qualifies in version 1.1.0 only downloads until '2013-2014' as valid:\n\n***\n\n```\nfunction (year, throw_error = TRUE) \n{\n    if (length(year) > 1) {\n        Map(validate_year, year, throw_error = throw_error) %>% \n            unlist() %>% unname() %>% return()\n    }\n    else {\n        valid <- switch(as.character(year), `1999-2000` = TRUE, \n            `2001-2002` = TRUE, `2003-2004` = TRUE, `2005-2006` = TRUE, \n            `2007-2008` = TRUE, `2009-2010` = TRUE, `2011-2012` = TRUE, \n            `2013-2014` = TRUE, FALSE)\n        if (throw_error == TRUE && valid == FALSE) {\n            stop(paste0(\"Invalid year: \", year))\n        }\n        return(valid)\n    }\n}\n```\n\n***\n\n**Conclusion**: Special data packages can facilitate your work, but to know how to download data programmatically on your own is an indispensable data science skill.\n\nSee tab \"NHANES 2\" how this is done.\n\n\n###### NHANES 2\n\n:::::{.my-r-code}\n:::{.my-r-code-header}\n:::::: {#cnj-chap03-get-NHANES2-data}\n: Get NHANES data 2017-2018 from the CDC website with {haven}\n::::::\n:::\n::::{.my-r-code-container}\n\n\n::: {.cell}\n\n```{#lst-chap03-get-NHANES2-data .r .cell-code  lst-cap=\"Get NHANES data 2017-2018 from the CDC website with {haven}\"}\n## run only once (manually)\n# download audiology data (AUQ_J)\nnhanes_2018 <- haven::read_xpt(\n    file = \"https://wwwn.cdc.gov/Nchs/Nhanes/2017-2018/AUQ_J.XPT\"\n)\n\ndata_folder <- base::paste0(here::here(), \"/data/\")\nif (!base::file.exists(data_folder)) \n    {base::dir.create(data_folder)}\n\nchap03_folder <- base::paste0(here::here(), \"/data/chap03/\")\nif (!base::file.exists(chap03_folder)) \n    {base::dir.create(chap03_folder)}\n\nbase::saveRDS(object = nhanes_2018, \n        file = paste0(chap03_folder, \"/nhanes_2018.rds\"))\n```\n:::\n\n\n\n::::\n:::::\n\nThe download with {**haven**} has the additional advantage that the variables are labelled as already explained in @sec-chap01-labelled-data.\n\n\n:::\n\n\n::::\n:::::\n\n:::::{.my-example}\n:::{.my-example-header}\n:::::: {#exm-chap03-waffle-charts}\n: Creating Waffle Charts\n::::::\n:::\n::::{.my-example-container}\n\n::: {.panel-tabset}\n\n###### 2012\n\n:::::{.my-r-code}\n:::{.my-r-code-header}\n:::::: {#cnj-chap03-waffle-chart-nhanes-2012}\n: Creating a waffle chart for number of total rounds fired (NHANES survey 2011-2012)\n::::::\n:::\n::::{.my-r-code-container}\n\n\n::: {#lst-chap03-waffle-chart-rounds-fired1}\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes_2012 <- readRDS(\"data/chap03/nhanes_2012.rds\")\n\nrounds_fired_2012 <- nhanes_2012 |> \n    dplyr::select(AUQ310) |> \n    tidyr::drop_na() |> \n    dplyr::mutate(AUQ310 = forcats::as_factor(AUQ310)) |> \n    dplyr::mutate(AUQ310 = forcats::fct_recode(AUQ310,\n        \"1 to less than 100\" = \"1\",\n        \"100 to less than 1000\" = \"2\",\n        \"1000 to less than 10k\" = \"3\",\n        \"10k to less than 50 k\" = \"4\",\n        \"50k or more\" = \"5\",\n        \"Refused to answer\" = \"7\",\n        \"Don't know\" = \"9\")\n    )\n\nfired_2012 <- rounds_fired_2012 |>\n    dplyr::count(AUQ310) |> \n    dplyr::mutate(prop = round(n / sum(n), 2) * 100) |> \n    dplyr::relocate(n, .after = dplyr::last_col())\n\nwaffle::waffle(parts = fired_2012,\n               rows = 10,\n               # colors = c(\"azure2\", \"azure3\", \n               #            \"grey71\", \"grey41\", \"black\",\n               #  \"lemonchiffon1\"))\n               colors = c(\"lightblue1\", \"lightsteelblue1\", \n                          \"deepskyblue1\", \"dodgerblue3\", \"black\",\n                \"lemonchiffon1\"))\n```\n\n::: {.cell-output-display}\n![Proportion of total rounds fired (NHANES survey 2011-2012)](03-data-visualization_files/figure-html/fig-waffle-chart-nhanes-2012-1.png){#fig-waffle-chart-nhanes-2012 width=672}\n:::\n:::\n\nProportion of total rounds fired (NHANES survey 2011-2012)\n\n:::\n\n***\n\nIn contrast to the example in the book I have used percentages and not absolute numbers.\n\n> To emulate the percentage view of a pie chart, a 10x10 grid should be used with each square representing 1% of the total. ([waffle homepage](https://cinc.rud.is/web/packages/waffle/index.html))\n\n\nAnother advantage: Using percentages I can compare 2011-2012 with 2017-2018 (see @fig-waffle-chart-nhanes-2018)\n\n\n::::\n:::::\n\n\n![How many total rounds have you ever fired? [Codebook 2011-2012 AUDIOMETRY](https://wwwn.cdc.gov/nchs/data/nhanes/2011-2012/questionnaires/auq.pdf)](img/chap03/NHANES-codebook-firearms-2012-min.png){#fig-firearms-codebook-2012\nfig-alt=\"'How many rounds in total have you ever fired?' this question has several options:\n- 1 = 1 to less than 100 rounds \n- 2 = 100 to less than 1,000 rounds \n- 3 = 1,000 to less than 10,000 rounds \n- 4 = 10,000 to less than 50,000 rounds \n- 5 = 50,000 rounds or more \n- 7 = Refused \n- 9 = Don’t know\" fig-align=\"center\"}\n\n###### 2018\n\n\n:::::{.my-r-code}\n:::{.my-r-code-header}\n:::::: {#cnj-chap03-waffle-chart-nhanes-2018}\n: Creating a waffle chart for number of total rounds fired (NHANES survey 2017-2018)\n::::::\n:::\n::::{.my-r-code-container}\n\n::: {#lst-chap03-waffle-chart-rounds-fired2}\n\n::: {.cell}\n\n```{.r .cell-code}\nnhanes_2018 <- readRDS(\"data/chap03/nhanes_2018.rds\")\n\nrounds_fired_2018 <- nhanes_2018 |> \n    dplyr::select(AUQ310) |> \n    tidyr::drop_na() |> \n    dplyr::mutate(AUQ310 = forcats::as_factor(AUQ310)) |> \n    dplyr::mutate(AUQ310 = forcats::fct_recode(AUQ310,\n        \"1 to less than 100\" = \"1\",\n        \"100 to less than 1000\" = \"2\",\n        \"1000 to less than 10k\" = \"3\",\n        \"10k to less than 50 k\" = \"4\",\n        \"50k or more\" = \"5\",\n        \"Refused to answer\" = \"7\",\n        \"Don't know\" = \"9\")\n    )\n\nfired_2018 <-  rounds_fired_2018 |> \n    dplyr::count(AUQ310) |>\n    dplyr::mutate(prop = round(n / sum(n), 2) * 100) |> \n    dplyr::relocate(n, .after = dplyr::last_col())\n\nwaffle::waffle(parts = fired_2018,\n               rows = 10,\n               colors = c(\"lightblue1\", \"lightsteelblue1\", \n                          \"deepskyblue1\", \"dodgerblue3\", \"black\",\n               \"gold1\", \"lemonchiffon1\"))\n```\n\n::: {.cell-output-display}\n![Proportion of total rounds fired (NHANES survey 2017-2018)](03-data-visualization_files/figure-html/fig-waffle-chart-nhanes-2018-1.png){#fig-waffle-chart-nhanes-2018 width=672}\n:::\n:::\n\n\nProportion of total rounds fired (NHANES survey 2017-2018)\n\n:::\n\n***\n\nThe number of different levels of the factor variable is almost too high to realize at one glance the differences of the various categories.\n\n> Best practices suggest keeping the number of categories small, just as should be done when creating pie charts. ([Create Waffle Charts Visualization](https://cinc.rud.is/web/packages/waffle/index.html))\n\nCompare 2011-2012 with 2017-2018 (see @fig-waffle-chart-nhanes-2012). You see there is just a small difference: Respondents in the 2017-2018 survey have fired tiny less rounds as the people asked in the 2011-2012 survey. Generally speaking: The fired total of rounds remains more or less constant during the period 2012 - 2018.  \n\n\n::::\n:::::\n\n![How many total rounds have you ever fired? [Codebook 2017-2018 AUDIOMETRY](https://wwwn.cdc.gov/nchs/data/nhanes/2017-2018/questionnaires/AUQ_J.pdf)](img/chap03/NHANES-codebook-firearms-2018-min.png){#fig-firearms-codebook-2018\nfig-alt=\"'How many rounds in total have you ever fired?' this question has several options:\n- 1 = 1 to less than 100 rounds \n- 2 = 100 to less than 1,000 rounds \n- 3 = 1,000 to less than 10,000 rounds \n- 4 = 10,000 to less than 50,000 rounds \n- 5 = 50,000 rounds or more \n- 7 = Refused \n- 9 = Don’t know\" fig-align=\"center\"}\n\n###### Compare\n\n:::::{.my-r-code}\n:::{.my-r-code-header}\n:::::: {#cnj-chap03-compare-fired-nhanes-2012-2018}\n: Compare the total rounds fired between the NHANES survey participants 2011-2012 and 2017-2018\n::::::\n:::\n::::{.my-r-code-container}\n\n::: {#tbl-compare-fired-nhanes-2012-2018 .cell tbl-cap='Total rounds fired of NHANES survey participants 2011-2012 and 2017-2018'}\n\n```{.r .cell-code}\nfired <- dplyr::full_join(x = fired_2012,\n                          y = fired_2018,\n                          by = dplyr::join_by(AUQ310) \n)\n\nfired <-  fired |> \n    dplyr::rename(\n        \"Rounds fired\" = \"AUQ310\",\n        `2012(%)` = prop.x,\n        `n (2012)` = n.x,\n        `2018(%)` = prop.y,\n        `n (2018)` = n.y,\n        ) |> \n    dplyr::mutate(`Diff (%)` = `2012(%)` - `2018(%)`)\n\nfired\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>            Rounds fired 2012(%) n (2012) 2018(%) n (2018) Diff (%)\n#> 1    1 to less than 100      43      701      45      289       -2\n#> 2 100 to less than 1000      26      423      24      154        2\n#> 3 1000 to less than 10k      18      291      20      131       -2\n#> 4 10k to less than 50 k       7      106       7       45        0\n#> 5           50k or more       4       66       2       15        2\n#> 6            Don't know       2       26       2       10        0\n#> 7     Refused to answer      NA       NA       0        2       NA\n```\n\n\n:::\n:::\n\n\n***\n\nThe participants of the NHANES survey 2011-2012 and 2017-2018 fired almost the same numbers of total rounds. The participants in 2017-2018 fired just a tiny amount of bullets less. \n\n\n\n::::\n:::::\n\n:::\n\n::::\n:::::\n\n***\n\n\n\n\n\n\n\n## Exercises\n\n***\n\n## Packages introduced in this chapter\n\n### RNHANES\n\n:::::{.my-resource}\n:::{.my-resource-header}\nRNHANES: Facilitates Analysis of CDC NHANES Data\n:::\n::::{.my-resource-container}\n\n***\n\n::: {#pak-RNHANES}\n\n***\n\n{**RNHANES**}: [Facilitates Analysis of CDC NHANES Data](https://wwww.silentspring.org/RNHANES/index.html)\n\n\n(*There is no hexagon logo available for RNHANES*)\n\nRNHANES is an R package for accessing and analyzing <a class='glossary' title='CDC is the U.S. leading science-based, data-driven, service organization that protects the public’s health. (CDC)'>CDC</a> <a class='glossary' title='The National Health and Nutrition Examination Survey (NHANES) is a program of studies designed to assess the health and nutritional status of adults and children in the United States. The survey is unique in that it combines interviews and physical examinations. (NHANES)'>NHANES</a> (National Health and Nutrition Examination Survey) data that was developed by [Silent Spring Institute](https://silentspring.org/).\n\n{**RNHANES**}: A Package for Facilitating Analysis of CDC NHANES Data\n:::\n\n***\n::::\n:::::\n\n\n### httr2\n\n:::::{.my-resource}\n:::{.my-resource-header}\nhttr2: Perform HTTP Requests and Process the Responses\n:::\n::::{.my-resource-container}\n\n***\n\n::: {#pak-httr2}\n\n***\n\n{**httr2**}: [Perform HTTP Requests and Process the Responses](https://httr2.r-lib.org/)\n\nTools for creating and modifying HTTP requests, then performing them and processing the results. \n\n::: {layout=\"[10, 30]\" layout-valign=\"center\"}\n![](img/chap03/logoi/logo-httr2-min.png){width=\"176\"}\n\n{**httr2**} (pronounced hitter2) is a ground-up rewrite of {**httr**} that provides a pipeable <a class='glossary' title='An API, or application programming interface, is a set of defined rules that enable different applications to communicate with each other. It acts as an intermediary layer that processes data transfers between systems, letting companies open their application data and functionality to external third-party developers, business partners, and internal departments within their companies. (IBM)'>API</a> with an explicit request object that solves more problems felt by packages that wrap APIs (e.g. built-in rate-limiting, retries, OAuth, secure secrets, and more). --- {**httr2**} is designed to map closely to the underlying <a class='glossary' title='The Hypertext Transfer Protocol (HTTP) is an application layer protocol in the Internet protocol suite model for distributed, collaborative, hypermedia information systems.[1] HTTP is the foundation of data communication for the World Wide Web, where hypertext documents include hyperlinks to other resources that the user can easily access, for example by a mouse click or by tapping the screen in a web browser. (Wikipedia)'>HTTP</a> <a class='glossary' title='A protocol is a system of rules that define how data is exchanged within or between computers. Communications between devices require that the devices agree on the format of the data that is being exchanged. The set of rules that defines a format is called a protocol. (MDN web docs)'>protocol</a>. For more details, read [An overview of HTTP](https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview) from <a class='glossary' title='MDN Web Docs, previously Mozilla Developer Network and formerly Mozilla Developer Center, is a documentation repository and learning resource for web developers. MDN Web Docs content is maintained by Mozilla, Google employees, and volunteers (community of developers and technical writers). It also contains content contributed by Microsoft, Google, and Samsung. Topics include HTML5, JavaScript, CSS, Web APIs, Django, Node.js, WebExtensions, MathML, and others. (Wikipedia)'>MDN</a>.\n\n:::\n\n\n{**httr2**}: A Package to Perform HTTP Requests and Process the Responses\n:::\n\n***\n::::\n:::::\n\n### readxl\n\n:::::{.my-resource}\n:::{.my-resource-header}\nreadxl: Read Excel Files\n:::\n::::{.my-resource-container}\n\n***\n\n::: {#pak-readxl}\n\n***\n\n{**readxl**}: [Read Excel Files](https://readxl.tidyverse.org/)\n\n::: {layout=\"[10, 30]\" layout-valign=\"center\"}\n![](img/chap03/logoi/logo-readxl-min.png){width=\"176\"}\n\nThe readxl package makes it easy to get data out of Excel and into R. Compared to many of the existing packages (e.g. {**gdata**}, {**xlsx**}, {**xlsReadWrite**}) {**readxl**} has no external dependencies, so it’s easy to install and use on all operating systems. It is designed to work with *tabular* data. Works on Windows, Mac and Linux without external dependencies.\n\n:::\n\n{**readxl**} supports both the legacy `.xls` format and the modern xml-based `.xlsx` format. The embedded [libxls](https://github.com/libxls/libxls) C library is used to support `.xls`, which abstracts away many of the complexities of the underlying binary format. To parse `.xlsx`, we use the [RapidXML](https://rapidxml.sourceforge.net/) C++ library.\n\n\n\n{**readxl**}: A Package to Read Excel Files\n:::\n\n***\n::::\n:::::\n\n### waffle\n\n:::::{.my-resource}\n:::{.my-resource-header}\nwaffle: Create Waffle Chart Visualizations\n:::\n::::{.my-resource-container}\n\n***\n\n::: {#pak-waffle}\n\n***\n\n{**waffle**}: [Create Waffle Chart Visualizations](https://cinc.rud.is/web/packages/waffle/index.html)\n\n(*There is no hexagon logo for {**waffle**} available*)\n\nSquare pie charts (a.k.a. waffle charts) can be used to communicate parts of a whole for categorical quantities. To emulate the percentage view of a pie chart, a 10x10 grid should be used with each square representing 1% of the total. \n\nModern uses of waffle charts do not necessarily adhere to this rule and can be created with a grid of any rectangular shape. \n\nBest practices suggest keeping the number of categories small, just as should be done when creating pie charts. \n\nTools are provided to create waffle charts as well as stitch them together, and to use glyphs for making isotype pictograms.\n\nIt uses {**ggplot2**} and returns a `ggplot2` object.\n\n\n\n{**waffle**}: A Package for Creating Waffle Chart Visualizations\n:::\n\n***\n::::\n:::::\n\n\n## Glossary\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:left;\"> definition </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> API </td>\n   <td style=\"text-align:left;\"> An API, or application programming interface, is a set of defined rules that enable different applications to communicate with each other. It acts as an intermediary layer that processes data transfers between systems, letting companies open their application data and functionality to external third-party developers, business partners, and internal departments within their companies. (&lt;a href=\"https://www.ibm.com/topics/api\"&gt;IBM&lt;/a&gt;) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CDC </td>\n   <td style=\"text-align:left;\"> CDC is the U.S. leading science-based, data-driven, service organization that protects the public’s health. (&lt;a href=\"https://www.cdc.gov/about/\"&gt;CDC&lt;/a&gt;) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> HTTP </td>\n   <td style=\"text-align:left;\"> The Hypertext Transfer Protocol (HTTP) is an application layer protocol in the Internet protocol suite model for distributed, collaborative, hypermedia information systems.[1] HTTP is the foundation of data communication for the World Wide Web, where hypertext documents include hyperlinks to other resources that the user can easily access, for example by a mouse click or by tapping the screen in a web browser. (&lt;a href=\"https://en.wikipedia.org/wiki/HTTP\"&gt;Wikipedia&lt;/a&gt;) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> MDN </td>\n   <td style=\"text-align:left;\"> MDN Web Docs, previously Mozilla Developer Network and formerly Mozilla Developer Center, is a documentation repository and learning resource for web developers. MDN Web Docs content is maintained by Mozilla, Google employees, and volunteers (community of developers and technical writers). It also contains content contributed by Microsoft, Google, and Samsung. Topics include HTML5, JavaScript, CSS, Web APIs, Django, Node.js, WebExtensions, MathML, and others. (&lt;a href=\"https://en.wikipedia.org/wiki/MDN_Web_Docs\"&gt;Wikipedia&lt;/a&gt;) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NHANES </td>\n   <td style=\"text-align:left;\"> The National Health and Nutrition Examination Survey (NHANES) is a program of studies designed to assess the health and nutritional status of adults and children in the United States. The survey is unique in that it combines interviews and physical examinations. (&lt;a href=\"https://www.cdc.gov/nchs/nhanes/about_nhanes.htm\"&gt;NHANES&lt;/a&gt;) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Protocol </td>\n   <td style=\"text-align:left;\"> A protocol is a system of rules that define how data is exchanged within or between computers. Communications between devices require that the devices agree on the format of the data that is being exchanged. The set of rules that defines a format is called a protocol. (&lt;a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Protocol\"&gt;MDN web docs&lt;/a&gt;) </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n\n## Session Info {.unnumbered}\n\n:::::{.my-r-code}\n:::{.my-r-code-header}\nSession Info\n:::\n::::{.my-r-code-container}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessioninfo::session_info()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> ─ Session info ───────────────────────────────────────────────────────────────\n#>  setting  value\n#>  version  R version 4.3.2 (2023-10-31)\n#>  os       macOS Sonoma 14.2.1\n#>  system   x86_64, darwin20\n#>  ui       X11\n#>  language (EN)\n#>  collate  en_US.UTF-8\n#>  ctype    en_US.UTF-8\n#>  tz       Europe/Vienna\n#>  date     2024-02-04\n#>  pandoc   3.1.11.1 @ /usr/local/bin/ (via rmarkdown)\n#> \n#> ─ Packages ───────────────────────────────────────────────────────────────────\n#>  package     * version    date (UTC) lib source\n#>  cli           3.6.2      2023-12-11 [1] CRAN (R 4.3.0)\n#>  colorspace    2.1-0      2023-01-23 [1] CRAN (R 4.3.0)\n#>  commonmark    1.9.0      2023-03-17 [1] CRAN (R 4.3.0)\n#>  curl          5.2.0      2023-12-08 [1] CRAN (R 4.3.2)\n#>  digest        0.6.34     2024-01-11 [1] CRAN (R 4.3.0)\n#>  dplyr         1.1.4      2023-11-17 [1] CRAN (R 4.3.0)\n#>  evaluate      0.23       2023-11-01 [1] CRAN (R 4.3.0)\n#>  fansi         1.0.6      2023-12-08 [1] CRAN (R 4.3.0)\n#>  fastmap       1.1.1      2023-02-24 [1] CRAN (R 4.3.0)\n#>  generics      0.1.3      2022-07-05 [1] CRAN (R 4.3.0)\n#>  glossary    * 1.0.0.9000 2023-08-12 [1] Github (debruine/glossary@819e329)\n#>  glue          1.7.0      2024-01-09 [1] CRAN (R 4.3.0)\n#>  highr         0.10       2022-12-22 [1] CRAN (R 4.3.0)\n#>  htmltools     0.5.7      2023-11-03 [1] CRAN (R 4.3.0)\n#>  htmlwidgets   1.6.4      2023-12-06 [1] CRAN (R 4.3.0)\n#>  jsonlite      1.8.8      2023-12-04 [1] CRAN (R 4.3.0)\n#>  kableExtra    1.4.0      2024-01-24 [1] CRAN (R 4.3.2)\n#>  knitr         1.45       2023-10-30 [1] CRAN (R 4.3.0)\n#>  lifecycle     1.0.4      2023-11-07 [1] CRAN (R 4.3.0)\n#>  magrittr      2.0.3      2022-03-30 [1] CRAN (R 4.3.0)\n#>  markdown      1.12       2023-12-06 [1] CRAN (R 4.3.0)\n#>  munsell       0.5.0      2018-06-12 [1] CRAN (R 4.3.0)\n#>  pillar        1.9.0      2023-03-22 [1] CRAN (R 4.3.0)\n#>  pkgconfig     2.0.3      2019-09-22 [1] CRAN (R 4.3.0)\n#>  R6            2.5.1      2021-08-19 [1] CRAN (R 4.3.0)\n#>  rlang         1.1.3      2024-01-10 [1] CRAN (R 4.3.0)\n#>  rmarkdown     2.25       2023-09-18 [1] CRAN (R 4.3.0)\n#>  rstudioapi    0.15.0     2023-07-07 [1] CRAN (R 4.3.0)\n#>  rversions     2.1.2      2022-08-31 [1] CRAN (R 4.3.0)\n#>  scales        1.3.0      2023-11-28 [1] CRAN (R 4.3.2)\n#>  sessioninfo   1.2.2      2021-12-06 [1] CRAN (R 4.3.0)\n#>  stringi       1.8.3      2023-12-11 [1] CRAN (R 4.3.0)\n#>  stringr       1.5.1      2023-11-14 [1] CRAN (R 4.3.0)\n#>  svglite       2.1.3      2023-12-08 [1] CRAN (R 4.3.0)\n#>  systemfonts   1.0.5      2023-10-09 [1] CRAN (R 4.3.0)\n#>  tibble        3.2.1      2023-03-20 [1] CRAN (R 4.3.0)\n#>  tidyselect    1.2.0      2022-10-10 [1] CRAN (R 4.3.0)\n#>  utf8          1.2.4      2023-10-22 [1] CRAN (R 4.3.0)\n#>  vctrs         0.6.5      2023-12-01 [1] CRAN (R 4.3.2)\n#>  viridisLite   0.4.2      2023-05-02 [1] CRAN (R 4.3.0)\n#>  withr         3.0.0      2024-01-16 [1] CRAN (R 4.3.0)\n#>  xfun          0.41       2023-11-01 [1] CRAN (R 4.3.0)\n#>  xml2          1.3.6      2023-12-04 [1] CRAN (R 4.3.0)\n#>  yaml          2.3.8      2023-12-11 [1] CRAN (R 4.3.0)\n#> \n#>  [1] /Library/Frameworks/R.framework/Versions/4.3-x86_64/library\n#>  [2] /Library/Frameworks/R.framework/Versions/4.3-x86_64/Resources/library\n#> \n#> ──────────────────────────────────────────────────────────────────────────────\n```\n\n\n:::\n:::\n\n\n\n::::\n:::::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}